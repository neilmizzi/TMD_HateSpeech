{%extends 'layout.html'%}

<!doctype html>
<html>
<head>
  <meta charset = "UTF-8">
</head>
   <body>
      {% block title %}
      Results for {{ user }}
      {% endblock %}

      {% block main %}
      <h1>Results for <a href='https://www.twitter.com/{{ user }}/'>@{{ user }}</a></h1>

      <!---GRAPH BEGINNING-->
      <link rel="stylesheet" href="https://cdn.bokeh.org/bokeh/release/bokeh-0.12.14.min.css" type="text/css" />
      <link rel="stylesheet" href="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-0.12.14.min.css" type="text/css" />
      <link rel="stylesheet" href="https://cdn.bokeh.org/bokeh/release/bokeh-tables-0.12.14.min.css" type="text/css">
      <div align=center>
        {{ div | safe }}
      </div>

      <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-2.0.0.min.js" integrity="sha384-5Y+xuMRAbgBj/2WKUiL8yzV4fBFic1HJPo2hT3pq2IsEzbsJjj8kT2i0b1lZ7C2N" crossorigin="anonymous"></script>
        <script type="text/javascript">
            Bokeh.set_log_level("info");
        </script>
      {{ script | safe }}
      <!--GRAPH END-->

      <!-- The embedder function will append tweets to this div element
      <div id='tweets'></div>


Possibly add this json function to a seperate json script
<script>
  var tweet_urls = a;
  var tweetContainer = document.getElementById('tweets')
  console.log(tweetContainer)

  window.onload = (function(){
    tweet_urls.forEach(element => {
    // Make getElement

    var tweet = document.createElement("div");
    tweet.classList.add('tweet')

    // Use url
    twttr.widgets.createTweet(
      element, tweet,
      {
        conversation : 'none',    // or all
        cards        : 'hidden',  // or visible
        linkColor    : '#cc0000', // default is blue
        theme        : 'light'    // or dark
      })
    .then (function (el) {
      tweetContainer.appendChild(tweet)
      console.log(el)
      console.log(element)
      console.log(tweet)

      el.contentDocument.querySelector(".footer").style.display = "none";
    });
  });
});
</script> -->

      <div id='results'>
         <!--TODO Replace Table with appropriate code-->
         <table align="center">
            <th>
              <td>Tweet</td>
              <td>Link</td>
              <td>Result</td>
            </th>

            {%for i, tweet, url, results in tweet_list%}
            <tr>
              <td>{{i+1}}</td>                    <!--index-->
              <td>{{tweet}}</td>                  <!--Tweet itself-->
              <td><a href={{url}}>link</a></td>   <!--URL-->
              <td>{{results}}</td>                <!--Label-->
            </tr>
            {%endfor%}

         </table>
      </div>
      {% endblock %}
   </body>
</html>
